<input type="range" id="<%= fieldName %>" name="<%= fieldName %>" min="1" max="5"
       value="3"
       style="display: none"/>
<div>
    <% for (let i = 1; i <= 5; ++i) { %>
        <i class="bi bi-star text-danger" id="<%= fieldName %>-set-<%= i %>"></i>
    <% } %>
</div>

<script>
  $(document).ready(function () {

    function setStarToValue(value) {
      for (let j = 1; j <= 5; ++j) {
        $(`#<%= fieldName %>-set-${j}`).removeClass("bi-star-fill");
        $(`#<%= fieldName %>-set-${j}`).addClass("bi-star");
      }

      for (let j = 1; j <= value; ++j) {
        $(`#<%= fieldName %>-set-${j}`).removeClass("bi-star");
        $(`#<%= fieldName %>-set-${j}`).addClass("bi-star-fill");
      }
    }

    setStarToValue($("#<%= fieldName %>").val());


    for (let i = 1; i <= 5; ++i) {
      $(`#<%= fieldName %>-set-${i}`).hover(function whenHoverOnStar() {
        setStarToValue(i);
      }, function whenHoverOffStar() {
        setStarToValue($("#<%= fieldName %>").val());
      });

      $(`#<%= fieldName %>-set-${i}`).click(function whenClickStar() {
        $("#<%= fieldName %>").val(i);
        setStarToValue(i);
      })
    }
  });
</script>
